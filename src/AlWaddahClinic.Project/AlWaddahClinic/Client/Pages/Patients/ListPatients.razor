@page "/patients/all"
@attribute [Authorize(Roles = "Admin")]

<style>
    .custom-btn {
        color: #2196F3;
        background-color: white;
        border: 1px solid #2196F3;
        border-radius: 5px;
        transition: 0.1s ease;
        font-size: 1.25rem;
        padding: .5rem;
        width: 100%;
        height: 100%;
    }

    .custom-btn:hover{
        color: white;
        background-color: #2196F3;
        transform: scale(1.05);
    }
</style>


<MudContainer Class="mt-5">
    <MudItem Class="d-flex justify-space-between mb-5">
        <MudItem>
            <MudText Typo="Typo.h4" Color="Color.Dark"><b>All Patients</b></MudText>
        </MudItem>

        <MudItem>
            <MudButton Variant="Variant.Outlined" Color="Color.Dark" @onclick="@GoToAddPatient">Add patient</MudButton>
        </MudItem>
    </MudItem>

    <MudGrid Class="mb-3">
        <MudItem xs="11" md="11" lg="11">
            <MudTextField Label="Search" Placeholder="Search in your patients" @bind-Text="_searchText" T="string" />
        </MudItem>
        <MudItem xs="1" md="1" lg="1">
            <button class="custom-btn" @onclick="GoToSearchResults"><i class="bi bi-search"></i></button>
        </MudItem>
    </MudGrid>


    <MudItem Class="d-flex justify-center align-center">
        @{
            if (patients.Value == null)
            {
                <MudItem Class="mt-5">
                    <Loader />
                </MudItem>
            }
            else
            {
                <MudGrid Justify="Justify.FlexStart" Spacing="2">
                    @foreach (var patient in patients.Value.OrderBy(p => p.FullName))
                    {
                        <MudItem xs="12" md="6" lg="4">
                            <PatientSummaryCard Patient="patient" />
                        </MudItem>
                    }
                </MudGrid>
            }
        }
    </MudItem>

</MudContainer>




